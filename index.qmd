---
page-title: "Statistical testing in null worlds"
sidebar: false
toc: false
filters:
  - footnote-styles
extensions:
  footnote-styles:
    # style: "symbols"
    custom: ["†", "‡", "§", "‖"]
---

::: {.column-screen .hero-image}
![](img/black-hole-cropped.jpg)
:::

::: {.column-screen .hero-banner}

# Statistical testing in null worlds

◎◉○

Learn the intuition behind p-values through simulation

:::

::: {.home}

## There is only one test

At their core, all statistical tests[^nhst-caveat] can be conducted by following a universal pattern:

- **Step 1: Calculate a sample statistic, or $\delta$ ("delta").** This is the main measure you care about: the difference in means, the average, the median, the proportion, the difference in proportions, the slope in a regression model, an odds ratio, etc.
- **Step 2: Use simulation to invent a world where $\delta$ is null.** Simulate what the world would look like if there was no difference or relationship between two groups, or if there was no difference in proportions, or where the average value is a specific number.
- **Step 3: Look at $\delta$ in the null world.** Put the sample statistic in the null world and see if it fits well.
- **Step 4: Calculate the probability that $\delta$ could exist in the null world.** This is the p-value, or the probability that you'd see a $\delta$ at least as extreme in a world where there's no difference.
- **Step 5: Decide if $\delta$ is statistically significant.** Choose some evidentiary standard or threshold for deciding if there's sufficient proof for rejecting the null world. Standard thresholds (from least to most rigorous) are 0.1, 0.05, and 0.01.

That's all. Five steps. No need to follow [complicated flowcharts to select the best and most appropriate statistical test](https://www.google.com/search?q=statistical+test+flow+chart). No need to decide which pretests you need to run to choose the right flavor of *t*-test. No need to think about whether you should use a *t*- or a *z*- distribution for your test statistic.

Simulate instead. [There is only one test.](https://allendowney.blogspot.com/2016/06/there-is-still-only-one-test.html)

::: {.callout-tip title="tl;dr"}
Calculate a number, simulate a null world, calculate the probability of seeing your number in that null world, and decide if that number is significantly different from what is typically seen in the null world.
:::

[^nhst-caveat]: At least for null hypothesis significance testing (NHST). Bayesian inference is different (see more about that below!).

::: {.column-page-inset}

![](img/only-one-test.png){.lightbox}

:::

## Examples

This site contains a few different illustrations of common statistical tests:

- [Difference in means](diff-in-means.qmd)
- [Difference in proportions](diff-in-props.qmd)
- [One-sample mean](one-sample-mean.qmd)
- [Regression slope](regression.qmd)


## Do I have to simulate everything?

No! In practice, you'll typically run regular regressions, *t*-tests, or $\chi^2$ tests. These use known theoretical distributions to approximate the null world mathematically rather than through simulation, but **the intuition is identical**: a p-value is still the probability of seeing a $\delta$ at least as extreme in a world where there's no difference. 

Once you understand this general framework, ["you can understand *any* hypothesis test"](https://moderndive.com/v2/hypothesis-testing.html#only-one-test), even if it's not done through simulation.

But simulation really shines when your $\delta$ is something unusual---something that doesn't have a convenient built-in test or a place in a [statistical test flowchart](https://www.google.com/search?q=statistical+test+flow+chart).[^flowchart] Want to test a difference in group *medians*? Some interesting quantity that no textbook has ever named, like the average number of years a country ranks in the top five for GDP growth? You can test it! Define any $\delta$ you want, simulate a null world for it, and get a valid p-value. No flowchart required. [The {infer} package](https://infer.netlify.app/) in R makes this straightforward.

For more examples of this process, and a more formal explanation of why it works, see [Allen Downey's "There is still only one test"](https://allendowney.blogspot.com/2016/06/there-is-still-only-one-test.html) and chapters 7–10 of [ModernDive](https://moderndive.com/) ([especially chapter 8](https://moderndive.com/9-hypothesis-testing.html)).

[^flowchart]: See chapter 1 of Richard McElreath's *Statistical Rethinking* for more about issues with statistical test flowcharts. He has a [free lecture video](https://www.youtube.com/watch?v=cclUd_HoRlo) and [slides](https://speakerdeck.com/rmcelreath/statistical-rethinking-2022-lecture-01) and [other resources here](https://github.com/rmcelreath/stat_rethinking_2022).


## This all feels vaguely Bayesian?

Yep. All this simulation thinking is actually part of my clandestine plot to get more people curious about Bayesian statistics. This way of thinking prepares you for Bayesian inference, without actually being Bayesian.

This simulation-based approach mirrors a lot of the computational thinking behind Bayesian statistics. In both approaches, we (1) start with an explicit data-generating process and (2) think about uncertainty with simulation instead of formulas.

But there's an important difference in what we're simulating!

With traditional null hypothesis testing, we simulate a null world and ask:

> If this were the world we lived in, how surprising would our observed $\delta$ be?

Bayesian statistics flips this. Instead of asking how extreme our data (or $\delta$) is in a single null world, we model uncertainty about the parameter $\delta$ itself. After combining prior beliefs with observed data, we get a posterior distribution that we can simulate from to ask:

> What range of values of $\delta$ are most plausible, given the data we've observed?

If that sounds fun—and if you'd rather say things like "there's an X% probability that $\delta$ is positive" or "$\delta$ is most likely between X and Y" instead of the convoluted "in a world where $\delta$ is 0ish, there's an X% probability of seeing a $\delta$ at least as extreme as what we observed"—check out [*Bayes Rules!*](https://www.bayesrulesbook.com/) for the best introduction I've found to Bayesian modeling.

:::

::: {style="font-size: 80%; text-align: right;"}
Photo by [BoliviaInteligente](https://unsplash.com/@boliviainteligente) on [Unsplash](https://unsplash.com/photos/a-black-hole-in-the-center-of-a-black-hole-MO6wb4hdhZo)
:::
